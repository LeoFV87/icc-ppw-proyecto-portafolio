<div class="max-w-3xl mx-auto p-6 bg-base-100 shadow-xl rounded-2xl mt-8">
  <div class="text-center mb-8">
    <div class="avatar mb-4">
      <div class="w-24 rounded-full ring ring-primary ring-offset-base-100 ring-offset-2">
        <img [src]="photoInput() || currentUser()?.photoURL || 'https://ui-avatars.com/api/?name=' + currentUser()?.displayName"
             referrerpolicy="no-referrer"/>
      </div>
    </div>
    <h2 class="text-2xl font-bold">{{ currentUser()?.displayName }}</h2>
    <div class="badge badge-secondary mt-2 font-bold uppercase">
      {{ specialty() || 'PROGRAMADOR' }}
    </div>
  </div>

  <div class="form-control w-full mb-4">
    <label class="label"><span class="label-text font-bold">Título / Especialidad</span></label>
    <input
      type="text"
      [ngModel]="specialty()"
      (ngModelChange)="specialty.set($event)"
      placeholder="Ej: Full Stack Developer, Arquitecto de Software..."
      class="input input-bordered w-full"
    />
  </div>

  <div class="form-control w-full mb-4">
    <label class="label"><span class="label-text font-bold">Foto de Perfil (URL)</span></label>
    <input
      type="text"
      [ngModel]="photoInput()"
      (ngModelChange)="photoInput.set($event)"
      placeholder="https://..."
      class="input input-bordered w-full"
    />
    <label class="label"><span class="label-text-alt">Pega aquí el enlace de tu imagen</span></label>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
    <div class="form-control w-full">
      <label class="label"><span class="label-text font-bold">LinkedIn (URL)</span></label>
      <input
        type="text"
        [ngModel]="linkedin()"
        (ngModelChange)="linkedin.set($event)"
        placeholder="https://linkedin.com/in/..."
        class="input input-bordered w-full"
      />
    </div>
    <div class="form-control w-full">
      <label class="label"><span class="label-text font-bold">GitHub (URL)</span></label>
      <input
        type="text"
        [ngModel]="github()"
        (ngModelChange)="github.set($event)"
        placeholder="https://github.com/..."
        class="input input-bordered w-full"
      />
    </div>
  </div>

  <div class="form-control w-full mb-4">
    <label class="label"><span class="label-text font-bold">Biografía / Descripción</span></label>
    <textarea
      [ngModel]="description()"
      (ngModelChange)="description.set($event)"
      class="textarea textarea-bordered h-24"
      placeholder="Cuéntale a los clientes sobre tu experiencia...">
    </textarea>
    <label class="label"><span class="label-text-alt">Esto aparecerá en tu tarjeta de 'Explorar'</span></label>
  </div>

  <div class="form-control w-full mb-4">
    <label class="label"><span class="label-text font-bold">Habilidades Técnicas</span></label>
    <input
      type="text"
      [ngModel]="skillsInput()"
      (ngModelChange)="skillsInput.set($event)"
      placeholder="Ej: Angular, Firebase, Tailwind CSS, Figma"
      class="input input-bordered w-full"
    />
    <label class="label"><span class="label-text-alt">Separa tus habilidades con comas</span></label>
  </div>

  <div class="form-control w-full mb-6 p-4 bg-primary/5 rounded-lg border border-primary/20">
    <label class="label">
      <span class="label-text font-bold text-primary">Horarios de Disponibilidad (Asesorías)</span>
    </label>
    <input
      type="text"
      [ngModel]="availabilityInput()"
      (ngModelChange)="availabilityInput.set($event)"
      placeholder="Ej: Lunes 09:00 - 12:00, Miércoles 14:00 - 17:00"
      class="input input-bordered w-full border-primary focus:border-primary-focus"
    />
    <label class="label">
      <span class="label-text-alt italic opacity-70">
        Separa los bloques de tiempo con comas. **¡Obligatorio para que los clientes te agenden!**
      </span>
    </label>
  </div>

  <button
    (click)="saveProfile()"
    class="btn btn-primary w-full shadow-lg"
    [disabled]="isSaving()">
    @if (isSaving()) {
      <span class="loading loading-spinner"></span>
    }
    Guardar Perfil en PostgreSQL
  </button>
</div>
